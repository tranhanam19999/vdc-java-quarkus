--------------------------------------------------------
--  DDL for Table REF_SWI_AUTOMATIC_PAYMENT_BK
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" 
   (	"SWI_CONTRACT_ID" NUMBER, 
	"SWI_CUSTOMER_INTEREST" NUMBER, 
	"SWI_MPESA_INTEREST" NUMBER, 
	"SWI_BANK_INTEREST" NUMBER, 
	"SWI_TAX_PAID" NUMBER, 
	"SWI_TRANSACTION_ID" VARCHAR2(20), 
	"SWI_CREATED_AT" DATE, 
	"SWI_CUSTOMER_GROSS_INTEREST" NUMBER
   ) ;
--------------------------------------------------------
--  Constraints for Table REF_SWI_AUTOMATIC_PAYMENT_BK
--------------------------------------------------------

  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_CONTRACT_ID" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_CUSTOMER_INTEREST" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_MPESA_INTEREST" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_BANK_INTEREST" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_TAX_PAID" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_TRANSACTION_ID" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_AUTOMATIC_PAYMENT_BK" MODIFY ("SWI_CREATED_AT" NOT NULL ENABLE);

--------------------------------------------------------
--  DDL for Table REF_SWI_LS_INTEREST_BK
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_LS_INTEREST_BK" 
   (	"SWI_LS_CONTRACT_ID" NUMBER, 
	"SWI_LS_MPESA_INTEREST" NUMBER, 
	"SWI_LS_BANK_INTEREST" NUMBER, 
	"SWI_LS_DATE" DATE, 
	"SWI_LS_GROSS_CUSTOMER_INTEREST" NUMBER
   ) ;

   COMMENT ON COLUMN "ODS"."REF_SWI_LS_INTEREST_BK"."SWI_LS_CONTRACT_ID" IS 'Contract ID';
   COMMENT ON COLUMN "ODS"."REF_SWI_LS_INTEREST_BK"."SWI_LS_MPESA_INTEREST" IS 'Interest Generated By M-PESA';
   COMMENT ON COLUMN "ODS"."REF_SWI_LS_INTEREST_BK"."SWI_LS_BANK_INTEREST" IS 'Interest Generated By the Bank';
   COMMENT ON COLUMN "ODS"."REF_SWI_LS_INTEREST_BK"."SWI_LS_GROSS_CUSTOMER_INTEREST" IS 'GROSS Interest Generated By the customer';
--------------------------------------------------------
--  Constraints for Table REF_SWI_LS_INTEREST_BK
--------------------------------------------------------

  ALTER TABLE "ODS"."REF_SWI_LS_INTEREST_BK" MODIFY ("SWI_LS_CONTRACT_ID" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_LS_INTEREST_BK" MODIFY ("SWI_LS_MPESA_INTEREST" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_LS_INTEREST_BK" MODIFY ("SWI_LS_BANK_INTEREST" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_LS_INTEREST_BK" MODIFY ("SWI_LS_DATE" NOT NULL ENABLE);
  ALTER TABLE "ODS"."REF_SWI_LS_INTEREST_BK" MODIFY ("SWI_LS_GROSS_CUSTOMER_INTEREST" NOT NULL ENABLE);

--------------------------------------------------------
--  DDL for Table REF_SWI_SAVINGS_BANK
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_SAVINGS_BANK" 
   (	"SWI_BANK_ID" NUMBER, 
	"SWI_BANK_NAME" VARCHAR2(40 BYTE), 
	"SWI_BANK_DESCRIPTION" VARCHAR2(100 BYTE), 
	"SWI_ANNUAL_INTEREST" NUMBER, 
	"SWI_MPESA_COMMISSION" NUMBER, 
	"SWI_BANK_COMMISSION" NUMBER, 
	"SWI_CUSTOMER_TAX" NUMBER DEFAULT 0, 
	"SWI_MPESA_CANCELATION_TAX" NUMBER DEFAULT 0, 
	"SWI_BANK_CANCELATION_TAX" NUMBER DEFAULT 0, 
	"SWI_CREATED_AT" DATE, 
	"SWI_UPDATED_AT" DATE, 
	"SWI_BANK_SHORTCODE" VARCHAR2(20 BYTE), 
	"SWI_MIN_CONTRIBUTION" NUMBER DEFAULT 0, 
	"SWI_MAX_CONTRIBUTION" NUMBER, 
	"SWI_CUSTOMER_COMMISSION" NUMBER
   ) ;

   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_ANNUAL_INTEREST" IS 'Anual Interest in %';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_MPESA_COMMISSION" IS 'M-Pesa Commission over customer earnings';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_BANK_COMMISSION" IS 'Bank Commission over customer earnings';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_CUSTOMER_TAX" IS 'Customer taxes in %';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_MPESA_CANCELATION_TAX" IS 'M-Pesa cancelation fee in % over customers earnings';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_BANK"."SWI_BANK_CANCELATION_TAX" IS 'Bank cancelation fee in % over customers earnings';
--------------------------------------------------------
--  DDL for Index REF_SWI_SAVINGS_BANK_PK
--------------------------------------------------------

--   CREATE UNIQUE INDEX "ODS"."REF_SWI_SAVINGS_BANK_PK" ON "ODS"."REF_SWI_SAVINGS_BANK" ("SWI_BANK_ID") 
--   ;
--------------------------------------------------------
--  DDL for Index REF_SWI_SAVINGS_BANK_UK1
--------------------------------------------------------

--   CREATE UNIQUE INDEX "ODS"."REF_SWI_SAVINGS_BANK_UK1" ON "ODS"."REF_SWI_SAVINGS_BANK" ("SWI_BANK_SHORTCODE") 
--   ;
--------------------------------------------------------
--  Constraints for Table REF_SWI_SAVINGS_BANK
--------------------------------------------------------

--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" MODIFY ("SWI_BANK_ID" NOT NULL ENABLE);
--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" MODIFY ("SWI_BANK_NAME" NOT NULL ENABLE);
--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" MODIFY ("SWI_ANNUAL_INTEREST" NOT NULL ENABLE);
--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" MODIFY ("SWI_MPESA_COMMISSION" NOT NULL ENABLE);
--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" MODIFY ("SWI_BANK_COMMISSION" NOT NULL ENABLE);
--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" ADD CONSTRAINT "REF_SWI_SAVINGS_BANK_PK" PRIMARY KEY ("SWI_BANK_ID")
--   USING INDEX  ENABLE;


--   ALTER TABLE "ODS"."REF_SWI_SAVINGS_BANK" ADD CONSTRAINT "REF_SWI_SAVINGS_BANK_SHORTCODE_UK" UNIQUE ("SWI_BANK_SHORTCODE")
--   USING INDEX (CREATE UNIQUE INDEX "ODS"."REF_SWI_SAVINGS_BANK_UK1" ON "ODS"."REF_SWI_SAVINGS_BANK" ("SWI_BANK_SHORTCODE") 
--   )  ENABLE;

--------------------------------------------------------
--  DDL for Table REF_SWI_SAVINGS_CONTRACT
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_SAVINGS_CONTRACT" 
   (	"SWI_ID" NUMBER, 
	"SWI_MSISDN" VARCHAR2(20), 
	"SWI_SAVING_TYPE" VARCHAR2(20), 
	"SWI_NORMAL_BALANCE" NUMBER, 
	"SWI_INTEREST_BALANCE" NUMBER DEFAULT 0, 
	"SWI_BANK_ID" NUMBER, 
	"SWI_INTEREST_LOST" NUMBER, 
	"SWI_MPESA_COMISSION" NUMBER DEFAULT 0, 
	"SWI_BANK_COMISSION" NUMBER DEFAULT 0, 
	"SWI_CONTRACT_STATE" VARCHAR2(20), 
	"SWI_SAVING_CREATION_DATE" DATE, 
	"SWI_EXPECTED_MATURITY_DATE" DATE, 
	"SWI_LAST_UPDATE" DATE, 
	"SWI_LAST_INTEREST_UPDATE" DATE, 
	"SWI_INTEREST_UPDATE_COUNTER" NUMBER DEFAULT 0, 
	"SWI_TAX_PAID" NUMBER DEFAULT 0, 
	"SWI_LANG" VARCHAR2(2) DEFAULT 'PT', 
	"SWI_FIRST_DAY" DATE, 
	"SWI_SUB_ID" VARCHAR2(50) DEFAULT NULL, 
	"SWI_NEXT_INTEREST_PAY" DATE
   ) ;

   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_ID" IS 'Contract ID For Internal Use';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_MSISDN" IS 'Customer MSIDN';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_SAVING_TYPE" IS 'Type of Saving
';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_NORMAL_BALANCE" IS 'Amount used to save';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_INTEREST_BALANCE" IS 'Earned Interest';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_BANK_ID" IS 'Bank ID
';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_INTEREST_LOST" IS 'Interest lost in case of withdrawal before maturity Date';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_MPESA_COMISSION" IS 'Earned Commission for Mpesa';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_BANK_COMISSION" IS 'Earned Commission for Bank';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_CONTRACT_STATE" IS 'State of the Saving Contract';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_LAST_INTEREST_UPDATE" IS 'Last Interest update';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_INTEREST_UPDATE_COUNTER" IS 'Counter of times that the interest was updated';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_TAX_PAID" IS 'Total Taxe paid';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_LANG" IS 'Contract Default Language';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_FIRST_DAY" IS 'First day of acumulative interest';
   COMMENT ON COLUMN "ODS"."REF_SWI_SAVINGS_CONTRACT"."SWI_SUB_ID" IS 'ID of GSM';

--------------------------------------------------------
--  DDL for Index REF_SWI_SAVINGS_CONTRACT_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ODS"."REF_SWI_SAVINGS_CONTRACT_PK" ON "ODS"."REF_SWI_SAVINGS_CONTRACT" ("SWI_ID") 
  ;
--------------------------------------------------------
--  Constraints for Table REF_SWI_SAVINGS_CONTRACT
--------------------------------------------------------

  ALTER TABLE "ODS"."REF_SWI_SAVINGS_CONTRACT" ADD CONSTRAINT "REF_SWI_SAVINGS_CONTRACT_PK" PRIMARY KEY ("SWI_ID")
  USING INDEX  ENABLE;

--------------------------------------------------------
--  DDL for Table REF_SWI_SAVINGS_TRANSACTIONS
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_SAVINGS_TRANSACTIONS" 
   (	"SWI_TRANSACTION_ID" VARCHAR2(20), 
	"SWI_CONTRACT_ID" NUMBER, 
	"SWI_AMOUNT" NUMBER, 
	"SWI_TRANSACTION_TYPE" VARCHAR2(20), 
	"SWI_LAST_TOTAL_BALANCE" NUMBER, 
	"SWI_UPDATED_BALANCE" NUMBER, 
	"SWI_CREATED_AT" DATE, 
	"SWI_UPDATED_AT" DATE, 
	"SWI_TRANSACTION_STATUS" VARCHAR2(20)
   ) ;
--------------------------------------------------------
--  DDL for Index REF_SWI_SAVINGS_TRANSACTIONS_PK
--------------------------------------------------------

  CREATE UNIQUE INDEX "ODS"."REF_SWI_SAVINGS_TRANSACTIONS_PK" ON "ODS"."REF_SWI_SAVINGS_TRANSACTIONS" ("SWI_TRANSACTION_ID") 
  ;
--------------------------------------------------------
--  Constraints for Table REF_SWI_SAVINGS_TRANSACTIONS
--------------------------------------------------------

  ALTER TABLE "ODS"."REF_SWI_SAVINGS_TRANSACTIONS" ADD CONSTRAINT "REF_SWI_SAVINGS_TRANSACTIONS_PK" PRIMARY KEY ("SWI_TRANSACTION_ID")
  USING INDEX  ENABLE;

--------------------------------------------------------
--  DDL for Table REF_SWI_SAVINGS_UPDATE_HISTORY
--------------------------------------------------------

  CREATE TABLE "ODS"."REF_SWI_SAVINGS_UPDATE_HISTORY" 
   (	"SWI_CONTRACT_ID" NUMBER, 
	"SWI_CUSTOMER_INTEREST" NUMBER, 
	"SWI_BANK_INTEREST" NUMBER, 
	"SWI_MPESA_INTEREST" NUMBER, 
	"SWI_EVENT_TYPE" VARCHAR2(20), 
	"SWI_DATE" DATE
   ) ;
